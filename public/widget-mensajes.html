<div id="widget-mensajes" >
  <button class="btn" onclick="cargarMensajes()" >Actualizar</button>
  <table class="table table-hover">
    <thead>
    <tr>
      <th>Oferta</th>
      <th>Interesado</th>
      <th>Vendedor</th>
      <th class="col-md-1">Mensaje</th>
    </tr>
    </thead>
    <tbody id="tablaCuerpo">

    </tbody>
  </table>
</div>

<script>
  var mensajes;
  function cargarMensajes(){
    $.ajax({
      url: URLbase + "/mensaje",
      type: "GET",
      data: { },
      dataType: 'json',
      headers: { "token": token },
      success: function(respuesta) {
        mensajes = respuesta;
        actualizarTabla(mensajes);
      },
      error : function (error){
        $( "#contenedor-principal" ).load("widget-login.html");
      }
    });
  }
  function actualizarTabla(mensajesMostrar){
    $( "#tablaCuerpo" ).empty(); // Vaciar la tabla
    for (i = 0; i < mensajesMostrar.length; i++) {
      $( "#tablaCuerpo" ).append(
              "<tr id="+mensajesMostrar[i]._id+">"+
              "<td>"+mensajesMostrar[i].oferta+"</td>" +
              "<td>"+mensajesMostrar[i].interesado+"</td>" +
              "<td>"+mensajesMostrar[i].vendedor+"</td>" +
              "<td>"+mensajesMostrar[i].mensaje+"</td>" +
              "</tr>" );
    }
  }
  cargarMensajes();
</script>

}